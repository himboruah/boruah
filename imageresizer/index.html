<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Image Resizer and Compressor</title>
  <link rel="stylesheet" href="./styles.css" />
  <script src="./heic2any.min.js" defer></script>
  <script src="./jszip.min.js" defer></script>
</head>
<body>
  <div class="container">
    <h1>Image Resizer and Compressor</h1>

    <div id="uploadBox" class="drop-zone" aria-label="Upload images by clicking or dropping files here">
      <input type="file" id="imageInput" accept="image/*,.heic" multiple />
      <p class="muted">Click to choose files or drag & drop here</p>
    </div>

    <div id="loadingIndicator" class="processing-dots hidden">Processing image</div>

    <div id="progressContainer" class="progress hidden" aria-live="polite">
      <div id="progressBar" class="progress-bar" style="width:0%" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
      <div id="progressText" class="progress-text">0%</div>
    </div>

    <form id="controls" class="hidden" aria-describedby="controlsHelp">
      <div id="controlsHelp" class="muted small">
        Set the target dimensions and quality. With aspect ratio on, changing one dimension updates the other.
      </div>
      <label for="width">Width</label>
      <input type="number" id="width" min="1" inputmode="numeric" />
      <label for="height">Height</label>
      <input type="number" id="height" min="1" inputmode="numeric" />
      <label class="inline"><input type="checkbox" id="aspectRatio" checked /> Maintain Aspect Ratio</label>
      <label for="quality">Quality (<span id="qualityValue">80%</span>)</label>
      <input type="range" id="quality" min="0" max="1" step="0.01" value="0.8" aria-label="Compression quality percentage" />
      <label for="outputFormat">Output Format</label>
      <select id="outputFormat">
        <option value="image/jpeg">JPEG</option>
        <option value="image/png">PNG</option>
        <option value="image/webp">WEBP</option>
      </select>
      <div class="button-group">
        <button type="button" id="resizeButton">Resize & Compress</button>
        <button type="button" id="resetButton">Back</button>
      </div>
    </form>

    <div id="filesSummary" class="hidden">
      <h2 class="h-sm">Files</h2>
      <div id="fileList" class="file-list"></div>
    </div>

    <canvas id="canvas" class="hidden" aria-hidden="true"></canvas>
  </div>

  <script src="./script.js" defer></script>
</body>
</html>